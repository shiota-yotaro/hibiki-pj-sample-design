
# DDL生成用プロンプトテンプレート集

## 概要

GitHub Copilotを活用したDDL自動生成のためのプロンプトテンプレート集です。
Markdownで作成されたテーブル設計書から、効率的にOracle DDLを生成するためのパターン化されたプロンプトを提供します。

## 使用方法

1. 適切なテンプレートを選択
2. `{variable}` 部分を実際の値に置き換え
3. テーブル設計のMarkdownテーブルと合わせてGitHub Copilotに入力
4. 生成されたDDLを確認・調整

---

## 1. 基本DDL生成プロンプト

### 用途
標準的なテーブル作成DDLの生成

### プロンプト
```
以下のテーブル設計からOracle DDLを生成してください：

## テーブル設計
{markdown_table_definition}

## 技術要件
- Oracle Database 19c以降
- 表領域: USERS
- 初期サイズ: 100M、自動拡張: ON
- 命名規則準拠（プロジェクト標準）
- 全項目に日本語コメント付与
- システム項目の自動トリガー生成

## 出力内容
1. CREATE TABLE文
2. CREATE INDEX文（主キー・外部キー・検索用）
3. CREATE SEQUENCE文（主キーがNUMBER型の場合）
4. CREATE TRIGGER文（CREATION_DATE、LAST_UPDATE_DATE等の自動設定）
5. ALTER TABLE文（制約追加）
6. COMMENT文（テーブル・カラムコメント）

## 制約・インデックス要件
- 主キー制約の明示的命名
- 外部キー制約の参照整合性保証
- CHECK制約による値域チェック
- 適切なインデックス配置（検索性能考慮）
```

---

## 2. 高性能バッチ処理向けDDL生成プロンプト

### 用途
大量データ処理が予想されるテーブルの最適化DDL生成

### プロンプト
```
以下の高負荷テーブル設計から性能最適化されたOracle DDLを生成してください：

## テーブル設計
{markdown_table_definition}

## 性能要件
- 想定データ量: {expected_record_count} 件
- 主要アクセスパターン: {access_patterns}
- 更新頻度: {update_frequency}
- 検索応答時間目標: {response_time_target}

## 最適化要求
1. 適切なパーティション設計（必要に応じて）
2. 効率的なインデックス戦略
3. 統計情報収集の考慮
4. バルク処理に適したストレージ設計
5. 並列処理対応

## 出力内容
- 最適化されたDDL文
- パーティション設計（必要な場合）
- インデックス設計の根拠説明
- 性能チューニングポイント
- 想定実行計画の解説
```

---

## 3. 親子関係テーブルDDL生成プロンプト

### 用途
親子関係・階層構造を持つテーブルの整合性を保証したDDL生成

### プロンプト
```
以下の親子関係テーブル設計から整合性制約付きOracle DDLを生成してください：

## 親テーブル設計
{parent_table_definition}

## 子テーブル設計
{child_table_definition}

## 親子関係要件
- 親子関係: {relationship_description}
- 削除時動作: {cascade_rule}
- 整合性制約: {integrity_constraints}

## 特別要件
1. 循環参照防止制約
2. 階層レベル制限（必要に応じて）
3. 親子間データ整合性チェック
4. 効率的な階層検索インデックス

## 出力内容
1. 親テーブル・子テーブルのCREATE TABLE文
2. 参照整合性制約（FOREIGN KEY）
3. 階層検索用インデックス
4. 整合性チェック用制約・トリガー
5. 階層データ検索用サンプルSQL
```

---

## 4. マスタテーブルDDL生成プロンプト

### 用途
システム全体で参照されるマスタテーブルの標準DDL生成

### プロンプト
```
以下のマスタテーブル設計から標準準拠DDLを生成してください：

## テーブル設計
{markdown_table_definition}

## マスタテーブル要件
- 更新頻度: 低（月次・年次レベル）
- 参照頻度: 高（全機能から参照）
- データ整合性: 最高レベル
- 可用性要件: {availability_requirement}

## 標準化要件
1. 共通システム項目の完全実装
2. ステータス管理項目の標準化
3. 表示順序制御の考慮
4. 国際化対応（必要に応じて）
5. 履歴管理機能（必要に応じて）

## 出力内容
1. 標準システム項目付きCREATE TABLE文
2. マスタ特有のCHECK制約
3. 高速参照用インデックス
4. データ整合性保証制約
5. マスタメンテナンス用ビュー
```

---

## 5. インターフェーステーブルDDL生成プロンプト

### 用途
外部システムとの連携で使用する中間テーブルのDDL生成

### プロンプト
```
以下のインターフェーステーブル設計からデータ連携用DDLを生成してください：

## テーブル設計
{markdown_table_definition}

## 連携要件
- 連携方向: {interface_direction}
- データ量: {expected_volume}
- 連携頻度: {sync_frequency}
- 保持期間: {retention_period}

## インターフェース特別要件
1. 処理状態管理（未処理・処理中・完了・エラー）
2. リトライ制御機能
3. エラー詳細記録機能
4. データ変換ログ機能
5. 自動クリーンアップ機能

## 出力内容
1. 基本テーブル構造
2. 処理制御用カラム・制約
3. 性能重視インデックス設計
4. パーティション設計（大量データ対応）
5. 自動削除用ジョブ・プロシージャ
```

---

## 6. 履歴テーブルDDL生成プロンプト

### 用途
監査・履歴管理用テーブルの大容量対応DDL生成

### プロンプト
```
以下の履歴テーブル設計から大容量対応DDLを生成してください：

## 元テーブル設計
{source_table_definition}

## 履歴テーブル要件
- 履歴保持期間: {retention_period}
- 想定増加量: {growth_estimate}
- 検索要件: {search_requirements}
- アーカイブ方針: {archive_strategy}

## 大容量対応要求
1. 日付ベースパーティション設計
2. 圧縮機能の活用
3. 効率的なアーカイブ機能
4. 高速検索インデックス
5. 統計情報管理の自動化

## 出力内容
1. パーティション対応CREATE TABLE文
2. 自動パーティション管理設定
3. 圧縮設定
4. 履歴検索用インデックス
5. アーカイブ・削除用プロシージャ
```

---

## 7. テストデータ生成プロンプト

### 用途
開発・テスト用の現実的なテストデータ生成SQL作成

### プロンプト
```
以下のテーブル設計からテストデータ生成SQLを作成してください：

## テーブル設計
{markdown_table_definition}

## テストデータ要件
- 生成件数: {record_count} 件
- データパターン: {data_patterns}
- 関連テーブル: {related_tables}
- 業務シナリオ: {business_scenarios}

## データ品質要求
1. 現実的なデータ分布
2. 業務ルールに準拠した値
3. 外部キー整合性保証
4. 日本語データの適切な含有
5. エッジケースデータの含有

## 出力内容
1. INSERT文（バインド変数使用）
2. データ生成用PL/SQLプロシージャ
3. データ整合性検証SQL
4. テストシナリオ別データセット
5. テストデータクリーンアップSQL
```

---

## 8. データ移行DDL生成プロンプト

### 用途
既存システムからの移行に特化したDDL・移行SQL生成

### プロンプト
```
以下の移行要件からデータ移行用DDL・SQLを生成してください：

## 移行元テーブル構造
{source_table_structure}

## 移行先テーブル設計
{target_table_definition}

## 移行要件
- 移行データ量: {migration_volume}
- ダウンタイム制限: {downtime_limit}
- データ変換ルール: {transformation_rules}
- 移行方式: {migration_method}

## 移行品質要求
1. データ整合性保証
2. 移行前後検証機能
3. ロールバック機能
4. 進捗監視機能
5. エラー回復機能

## 出力内容
1. 移行先テーブルDDL
2. データ移行SQL（変換ロジック含む）
3. 移行前後データ検証SQL
4. 移行進捗監視SQL
5. ロールバック用SQL
6. 移行手順書
```

---

## カスタマイズガイド

### テンプレートのカスタマイズ方法

1. **変数部分の置換**: `{variable}` を実際の値に置き換える
2. **要件の追加**: 固有の要件があれば「## 特別要件」セクションを追加
3. **出力内容の調整**: 不要な項目は削除、必要な項目は追加
4. **技術制約の反映**: Oracle以外のDBMSの場合は技術要件を変更

### 効果的な使用のコツ

- **段階的な生成**: 複雑なテーブルは基本→詳細→最適化の順で段階的に生成
- **検証の重要性**: 生成されたDDLは必ず構文・論理チェックを実施
- **継続的改善**: 生成結果の品質に基づいてプロンプトを継続的に改善
- **チーム共有**: 効果的なプロンプトはチーム内で共有・標準化

## 注意事項

- 生成されたDDLは必ず内容を確認してから実行してください
- 本番環境での実行前に開発環境での動作確認を徹底してください
- プロジェクト固有の命名規則・制約に合わせてカスタマイズしてください
- 生成AI の回答精度向上のため、できるだけ具体的で詳細なプロンプトを作成してください
